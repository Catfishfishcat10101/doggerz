/* Container: position by world X (left) and worldBottomPct (bottom) */
.dog-sprite-container {
  position: absolute;
  transform: translateX(-50%); /* center on world X */
  will-change: transform;
  contain: layout paint; /* isolate for cheaper repaints */
  pointer-events: none; /* container is decorative; button handles input */
}

/* Core sprite button */
/* We use CSS variables pushed from React:
   --sprite-w, --sprite-h: source frame size (sheet frame)
   --sprite-scale: integer scale (1,2,3â€¦)
   --flipX: 1 or -1
   --frames: number of frames in the sheet
   --speed-ms: animation duration
   --play: running | paused
*/
.dog-sprite {
  --sprite-w: 96px;
  --sprite-h: 96px;
  --sprite-scale: 1;
  --flipX: 1;
  --frames: 6;
  --speed-ms: 1200ms;
  --shadow-width: 62%;
  --shadow-height: 18%;
  --shadow-bottom: 6px;
  --shadow-opacity: 0.35;

  position: relative;
  display: inline-block;
  width: calc(var(--sprite-w) * var(--sprite-scale));
  height: calc(var(--sprite-h) * var(--sprite-scale));
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: calc(var(--sprite-w) * var(--frames)) var(--sprite-h);

  /* Keep pixels crisp even when scaled */
  image-rendering: -moz-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;

  /* Flip for left-facing */
  transform: scaleX(var(--flipX));
  transform-origin: center;

  /* Accessibility + UX */
  border: none;
  background-color: transparent;
  cursor: pointer;
  outline: none;

  /* Performance */
  will-change: background-position;
  pointer-events: auto; /* button must capture input */
}

/* Walk cycle via sprite sheet */
.dog-sprite--walk {
  animation: dog-walk var(--speed-ms) steps(var(--frames)) infinite;
  animation-play-state: var(--play, running);
}

/* Shadow (elliptical) */
.dog-sprite--shadow::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: var(--shadow-bottom);
  transform: translateX(-50%);
  width: var(--shadow-width);
  height: var(--shadow-height);
  background: radial-gradient(ellipse at center, rgba(0,0,0,var(--shadow-opacity)) 0%, rgba(0,0,0,0) 70%);
  filter: blur(1px);
  pointer-events: none;
}

/* Focus ring for keyboard users */
.dog-sprite--interactive:focus-visible {
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.65); /* indigo-ish */
  border-radius: 8px;
}

/* Reduced motion: freeze on first frame but keep interactivity */
@media (prefers-reduced-motion: reduce) {
  .dog-sprite--walk {
    animation: none !important;
  }
}

/* Keyframes: step across the sheet horizontally */
@keyframes dog-walk {
  100% {
    background-position-x: calc(var(--sprite-w) * var(--frames) * -1);
  }
}
